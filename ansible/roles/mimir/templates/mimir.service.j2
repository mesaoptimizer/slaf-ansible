#!/sbin/openrc-run
# OpenRC init script for Mimir
# Generated by Ansible

description="Mimir time-series database"
command="/usr/local/bin/mimir"
command_args="-config.file=/etc/mimir/mimir-config.yml"
command_user="mimir:mimir"
pidfile="/run/mimir.pid"
logfile="/var/log/mimir.log"

depend() {
	need net
}

start() {
	ebegin "Starting Mimir"
	start-stop-daemon --start \
		--user "$command_user" \
		--pidfile "$pidfile" \
		--background \
		--make-pidfile \
		--exec $command \
		-- $command_args
	eend $?
}

stop() {
	ebegin "Stopping Mimir"
	start-stop-daemon --stop \
		--pidfile "$pidfile" \
		--exec $command
	eend $?
}

restart() {
	stop
	sleep 1
	start
}
