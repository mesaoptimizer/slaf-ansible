---
# Grafana Alloy default variables

# Remote endpoints
alloy_mimir_endpoint: "http://mimir.home.arpa:9009"
alloy_loki_endpoint: "http://loki.home.arpa:3100"

# Ports
alloy_http_port: 12345
alloy_grpc_port: 12346

# Installation
alloy_version: "latest"
alloy_binary_path: /usr/bin/alloy

# Data and config directories
alloy_data_dir: /var/lib/alloy
alloy_config_dir: /etc/alloy
alloy_config_file: "{{ alloy_config_dir }}/config.alloy"

# User and group
alloy_user: alloy
alloy_group: alloy

# Log file (for OpenRC)
alloy_log_file: /var/log/alloy.log

# ============================================================================
# LOG COLLECTION
# ============================================================================

# Enable/disable system log collection to Loki
alloy_log_collection_enabled: true

# Additional systemd journal units to collect (Debian/Ubuntu).
# ssh.service is always collected. Add extra units here.
alloy_journal_units:
  - cron.service

# Syslog program allowlist regex (Alpine/OpenRC).
# Only log lines from matching programs are ingested from /var/log/messages.
# Keep this bounded to avoid high cardinality.
alloy_syslog_match_regex: "(sshd|sudo|su|CRON|kernel|rc-service|openrc|init)"

# DEPRECATED: Use alloy_log_collection_enabled, alloy_journal_units, and
# alloy_syslog_match_regex instead. These variables are no longer referenced.
# alloy_log_paths_alpine:
#   - path: "/var/log/messages"
#     log_type: "syslog"
# alloy_log_paths_debian:
#   - path: "/var/log/auth.log"
#     log_type: "auth"
#   - path: "/var/log/syslog"
#     log_type: "syslog"

# Scrape interval for metrics
alloy_scrape_interval: "60s"

# Labels applied to all metrics and logs
alloy_external_labels:
  env: "production"

# Extra config blocks to append (list of raw River config strings)
# Use this in group_vars or host_vars to add service-specific scrapes
# Example:
#   alloy_extra_config_blocks:
#     - |
#       loki.source.file "myapp" {
#         targets    = [{"__path__" = "/var/log/myapp/*.log", "log_type" = "myapp"}]
#         forward_to = [loki.process.filter.receiver]
#       }
alloy_extra_config_blocks: []
