---
- name: Deploy Grafana Alloy
  hosts: homelab:!kubernetes
  become: true
  gather_facts: true

  roles:
    - common
    - alloy

  post_tasks:
    - name: Display deployment summary
      ansible.builtin.debug:
        msg:
          - "=========================================="
          - "Alloy Deployment Complete"
          - "=========================================="
          - "Host: {{ inventory_hostname }}"
          - "OS Family: {{ ansible_os_family }}"
          - "Config: {{ alloy_config_file }}"
          - "HTTP Port: {{ alloy_http_port }}"
          - "Mimir Endpoint: {{ alloy_mimir_endpoint }}"
          - "Loki Endpoint: {{ alloy_loki_endpoint }}"
          - "=========================================="
